import{u as n,a as Oe,b as de,e as ze,L as Fe,r as m,f as Ne,h as Be,s as Ee,w as Le,i as He,o as ce,c as pe,j as o,k as l,l as j,v as se,m as C,p as c,V as Ge,q as ue,t as $e,Q as Ke,x as ie,y as Ye,z as Je,A as We,B as Xe,C as Ze,D as el,E as ll,F as al,G as tl,H as ol,I as nl,J as sl}from"./entry.9febad5f.js";const ul=(u,d)=>d.find(f=>f.id===u);function il(u,d,f,i){return u?d<i.min_hours_hourly?i.min_rate_hourly:R(i.per_hour*d):f<i.min_distance?i.min_rate_distance:R(i.min_rate_distance+(f-i.min_distance)*i.per_km)}const rl=(u,d)=>({fuelSurcharge:R(u*d.fuelSurcharge),gratuity:R(u*d.gratuity),HST:R(u*d.HST)}),R=u=>{let d=Number((Math.abs(u)*100).toPrecision(15));return Math.round(d)/100*Math.sign(u)};var re;const dl=typeof window<"u";dl&&((re=window==null?void 0:window.navigator)==null?void 0:re.userAgent)&&/iP(ad|hone|od)/.test(window.navigator.userAgent);function W(u){return typeof u=="function"?u():n(u)}function cl(u,d,f){return Oe(()=>{var i;const A=W(u),z=W(d),U=10**z;return Math[((i=W(f))==null?void 0:i.math)||"round"](A*U)/U})}const pl=C("div",{class:"text-center text-white uppercase text-h5"},"Instant Quote",-1),ml={class:"items-center justify-end row"},_l={class:"items-center justify-end row"},vl=de({__name:"QuasarForm",setup(u){const d=ze(),f=new Fe({apiKey:d.public.MAPS_API_KEY,libraries:["places"],version:"weekly",region:"ca"}),i=m(null);function A(){f.load().then(()=>{const a=new google.maps.Map(i.value,{mapTypeControl:!1,fullscreenControl:!1,center:{lat:43.65107,lng:-79.347015},zoom:9});new S(a)});class S{constructor(t){this.map=t,this.originPlaceId="",this.destinationPlaceId="",this.travelMode=google.maps.TravelMode.DRIVING,this.directionsService=new google.maps.DirectionsService,this.directionsRenderer=new google.maps.DirectionsRenderer,this.directionsRenderer.setMap(t);const s=m("origin-input"),r=m("destination-input"),g=document.getElementById(s.value),b=document.getElementById(r.value),p=new google.maps.places.Autocomplete(g,{fields:["all"]}),y=new google.maps.places.Autocomplete(b,{fields:["all"]});console.log(p),console.log(y),this.setupPlaceChangedListener(p,"ORIG"),this.setupPlaceChangedListener(y,"DEST")}setupPlaceChangedListener(t,s){t.bindTo("bounds",this.map),t.addListener("place_changed",()=>{const r=t.getPlace(),{address_components:g,formatted_address:b,name:p,geometry:y}=r,v=g,w=y.location.lat(),V=y.location.lng(),x=b,I=p,Q=v.map(({long_name:e,short_name:J})=>({longName:e,shortName:J}));if(console.log(Q),console.log(x),console.log(I),console.log(w),console.log(V),s==="ORIG"?(be.value=v,Ve.value=x,le.value=I,Z.value=w,he.value=V):(ye.value=v,xe.value=x,ae.value=I,ee.value=w,we.value=V),!r.place_id){window.alert("Please select an option from the dropdown list.");return}s==="ORIG"?this.originPlaceId=r.place_id:this.destinationPlaceId=r.place_id,this.route(),ee.value&&Z.value})}route(){if(!this.originPlaceId||!this.destinationPlaceId)return;const t=this;this.directionsService.route({origin:{placeId:this.originPlaceId},destination:{placeId:this.destinationPlaceId},travelMode:this.travelMode},(s,r)=>{console.log(s),r==="OK"?(t.directionsRenderer.setDirections(s),F.value=s.routes[0].legs[0].distance.value/1e3,X.value=s.routes[0].legs[0].duration.value/60,M.value=s.routes[0].legs[0].start_address,D.value=s.routes[0].legs[0].end_address,fe.value=s.geocoded_waypoints[0].types[0],ge.value=s.geocoded_waypoints[1].types[0]):window.alert("Directions request failed due to "+r)})}}}Ne(()=>{i.value&&A()});const z=[{label:"1 passenger",value:1},{label:"2 passengers",value:2},{label:"3 passengers",value:3},{label:"4 passengers",value:4},{label:"5 passengers",value:5},{label:"6 passengers",value:6},{label:"7 passengers",value:7}],U=[{label:"Point-to-Point",value:1},{label:"To Airport",value:2},{label:"From Airport",value:3},{label:"Hourly/As Directed",value:4}],me=[{label:"Standard Sedan",value:1},{label:"Premium Sedan",value:2},{label:"Standard SUV",value:3},{label:"Premium SUV",value:4}],_e=[{label:"2 hrs",value:2},{label:"3 hrs",value:3},{label:"4 hrs",value:4},{label:"5 hrs",value:5},{label:"6 hrs",value:6},{label:"7 hrs",value:7},{label:"8 hrs",value:8},{label:"9 hrs",value:9},{label:"10 hrs",value:10},{label:"11 hrs",value:11},{label:"12 hrs",value:12}],ve=Be(),{distance_traveled:F,duration_traveled:X,origin_location:M,origin_location_type:fe,destination_location:D,destination_location_type:ge,origin_address_components:be,destination_address_components:ye,origin_lng:he,origin_lat:Z,destination_lng:we,destination_lat:ee,origin_formatted_address:Ve,destination_formatted_address:xe,origin_place_name:le,destination_place_name:ae,first_name:N,last_name:B,email_address:E,phone_number:L,vehicle_image:H,pickup_date:k,pickup_time:T,service_type:h,vehicle_type:Ie,number_of_hours:O,num_passengers:G,is_round_trip:$,base_rate:ke,fuel_surcharge:Te,gratuity_rate:qe,hst:Pe,total_cost:K}=Ee(ve),_=m(null),q=m(1),te=m(!1),oe=m(!1),P=m(!1);Le(h,()=>{h.value.value===4?(P.value=!0,O.value=2):(P.value=!1,O.value=null),console.log(h.value.label,h.value.value,O.value,P.value)});const Y=m(!1),Se=async S=>{Y.value=!0;const a=await $fetch("/api/rates"),t=await $fetch("/api/surcharges");console.log(_.value),Ie.value=_.value,O.value=q.value,console.log(P.value);const s=ul(_.value.value,a);console.log(s);const r=il(P.value,q.value,F.value,s);console.log(r);const{fuelSurcharge:g,gratuity:b,HST:p}=rl(r,t),y=m(r+g+b+p);K.value=cl(y,2),console.log(K.value),ke.value=r,Te.value=g,qe.value=b,Pe.value=p;const v=()=>_.value.label==="Standard Sedan"?"https://imagedelivery.net/9mQjskQ9vgwm3kCilycqww/8c7c6a8d-06ad-4278-1c70-9d497b1cb200/1024":_.value.label==="Premium Sedan"?"https://imagedelivery.net/9mQjskQ9vgwm3kCilycqww/5d171f30-de2f-447c-a602-95ccf248c600/1024":_.value.label==="Standard SUV"?"https://imagedelivery.net/9mQjskQ9vgwm3kCilycqww/b4bf6461-ba55-48bd-e0ba-d613ae383000/1024":"https://imagedelivery.net/9mQjskQ9vgwm3kCilycqww/5d80107f-4800-45ae-8e20-c4adf2792f00/1024";H.value=v(),console.log(H.value);const w=S.timeStamp,{origin_input:V,destination_input:x,pickup_date:I,pickup_time:Q,service_type:e,num_passengers:J,first_name:je,last_name:Ce,email_address:Ae,phone_number:Re}=Object.fromEntries(new FormData(S.target)),ne={fields:[{objectTypeId:"0-1",name:"pick_up_date",value:I},{objectTypeId:"0-1",name:"pick_up_time",value:Q},{objectTypeId:"0-1",name:"vehicle_type",value:_.value.label},{objectTypeId:"0-1",name:"origin_formatted_address",value:V},{objectTypeId:"0-1",name:"destination_formatted_address",value:x},{objectTypeId:"0-1",name:"firstname",value:je},{objectTypeId:"0-1",name:"lastname",value:Ce},{objectTypeId:"0-1",name:"email",value:Ae},{objectTypeId:"0-1",name:"phone",value:Re},{objectTypeId:"0-1",name:"service_type",value:e},{objectTypeId:"0-1",name:"deal_amount",value:K.value},{objectTypeId:"0-1",name:"pax_amount",value:J},{objectTypeId:"0-1",name:"hours",value:q.value},{objectTypeId:"0-1",name:"distance",value:F.value},{objectTypeId:"0-1",name:"time",value:X.value},{objectTypeId:"0-1",name:"submission_timestamp",value:w},{objectTypeId:"0-1",name:"vehicle_image_url",value:H.value},{objectTypeId:"0-1",name:"destination_place_name",value:ae.value},{objectTypeId:"0-1",name:"origin_place_name",value:le.value}]};console.log(ne),console.log(S);const{data:Ue,error:Me}=await ol("/api/formSubmit",{method:"POST",headers:{"Content-Type":"application/json"},body:ne},"$Io6hFEYpd9"),De=nl();return setTimeout(()=>{De.push("/quoted")},750),Y.value=!1,{data:Ue,error:Me}},Qe=()=>m(null);return(S,a)=>{const t=Ke,s=ie,r=Ye,g=Je,b=We,p=Xe,y=Ze,v=el,w=ll,V=ie,x=al,I=tl,Q=He("close-popup");return ce(),pe(I,{"rounded-borders":"","no-error-focus":"","no-reset-focus":"",onSubmit:$e(Se,["prevent"]),onReset:Qe,id:"lead_form",ref:"myForm",class:"max-w-xl mx-auto q-px-sm q-pt-md q-pb-lg bg-black overflow-hidden",autocomplete:"off"},{default:o(()=>[l(t,null,{default:o(()=>[pl]),_:1}),l(t,null,{default:o(()=>[j(C("input",{type:"text",id:"origin-input",name:"origin_input",placeholder:"Enter Pickup Address or Airport Code","onUpdate:modelValue":a[0]||(a[0]=e=>c(M)?M.value=e:null),ref:"originLocation",class:"w-full px-3 py-2 text-gray-500 placeholder-gray-400 bg-white focus:border-primary focus:outline-primary focus:ring-primary/90",required:""},null,512),[[se,n(M)]])]),_:1}),l(t,null,{default:o(()=>[j(C("input",{type:"text",required:"",id:"destination-input",name:"destination_input",placeholder:"Enter Pickup Address or Airport Code","onUpdate:modelValue":a[1]||(a[1]=e=>c(D)?D.value=e:null),ref:"destinationLocation",class:"w-full px-3 py-2 text-gray-500 placeholder-gray-400 bg-white focus:border-primary focus:outline-primary focus:ring-primary/90"},null,512),[[se,n(D)]])]),_:1}),l(t,{class:"flex flex-col xs:flex-row q-pa-none"},{default:o(()=>[l(t,{class:"col"},{default:o(()=>[l(p,{"hide-bottom-space":"",modelValue:n(k),"onUpdate:modelValue":a[4]||(a[4]=e=>c(k)?k.value=e:null),mask:"date",rules:["date"],outlined:"",dense:"",square:"","stack-label":"",label:"Pick Up Date:","bg-color":"white","lazy-rules":"ondemand",name:"pickup_date",required:""},{append:o(()=>[l(b,{name:"event",class:"cursor-pointer"},{default:o(()=>[l(g,{cover:"","transition-show":"scale","transition-hide":"scale",modelValue:oe.value,"onUpdate:modelValue":a[3]||(a[3]=e=>oe.value=e)},{default:o(()=>[l(r,{name:"pickup_date",id:"pickup_date",modelValue:n(k),"onUpdate:modelValue":a[2]||(a[2]=e=>c(k)?k.value=e:null),required:"",rules:["date"]},{default:o(()=>[C("div",ml,[j(l(s,{label:"Close",color:"primary",flat:""},null,512),[[Q]])])]),_:1},8,["modelValue"])]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["modelValue"])]),_:1}),l(t,{class:"col"},{default:o(()=>[l(p,{"hide-bottom-space":"",modelValue:n(T),"onUpdate:modelValue":a[7]||(a[7]=e=>c(T)?T.value=e:null),mask:"time",rules:["time"],label:"Pickup Time:","lazy-rules":"ondemand",dense:"",square:"",outlined:"",name:"pickup_time","stack-label":"","bg-color":"white"},{append:o(()=>[l(b,{name:"access_time",class:"cursor-pointer"},{default:o(()=>[l(g,{modelValue:te.value,"onUpdate:modelValue":a[6]||(a[6]=e=>te.value=e),cover:"","transition-show":"scale","transition-hide":"scale"},{default:o(()=>[l(y,{modelValue:n(T),"onUpdate:modelValue":a[5]||(a[5]=e=>c(T)?T.value=e:null),name:"pickup_date",id:"pickup_date",required:"",rules:["time"]},{default:o(()=>[C("div",_l,[j(l(s,{label:"Close",color:"primary",flat:""},null,512),[[Q]])])]),_:1},8,["modelValue"])]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1}),l(t,{class:"flex flex-col xs:flex-row q-pa-none"},{default:o(()=>[l(t,{class:"col"},{default:o(()=>[l(v,{"hide-bottom-space":"",modelValue:n(h),"onUpdate:modelValue":a[8]||(a[8]=e=>c(h)?h.value=e:null),for:"service-type",id:"service-type",name:"service_type",dense:"",label:"Service Type:","stack-label":"",outlined:"",square:"",options:n(U),"bg-color":"white","lazy-rules":"",rules:[e=>!!e||"* Required"]},null,8,["modelValue","options","rules"])]),_:1}),l(t,{class:"col"},{default:o(()=>[l(v,{"hide-bottom-space":"",label:"Passengers:",name:"num_passengers",id:"num_passengers",dense:"",outlined:"",square:"","stack-label":"",modelValue:n(G),"onUpdate:modelValue":a[9]||(a[9]=e=>c(G)?G.value=e:null),options:n(z),"bg-color":"white","lazy-rules":"","emit-value":"",rules:[e=>!!e||"* Required"]},null,8,["modelValue","options","rules"])]),_:1})]),_:1}),l(t,{class:"flex flex-col xs:flex-row q-pa-none"},{default:o(()=>[l(t,{class:"col"},{default:o(()=>[l(v,{"hide-bottom-space":"",modelValue:n(_),"onUpdate:modelValue":a[10]||(a[10]=e=>c(_)?_.value=e:null),class:"text-gray-500",label:"Vehicle Type",options:n(me),dense:"",name:"vehicle_type",outlined:"",square:"","stack-label":"","bg-color":"white","lazy-rules":"ondemand",rules:[e=>!!e||"* Required"]},null,8,["modelValue","options","rules"])]),_:1}),l(t,{class:"col"},{default:o(()=>[l(v,{"hide-bottom-space":"",name:"number_of_hours",id:"num_hours",label:"Number Of Hours:",modelValue:n(q),"onUpdate:modelValue":a[11]||(a[11]=e=>c(q)?q.value=e:null),options:n(_e),outlined:"",square:"",dense:"","stack-label":"",disable:!n(P),"bg-color":"white","lazy-rules":"ondemand","emit-value":"",rules:[e=>!!e||"* Required"]},null,8,["modelValue","options","disable","rules"])]),_:1})]),_:1}),l(t,{class:"flex flex-col xs:flex-row q-pa-none"},{default:o(()=>[l(t,{class:"col"},{default:o(()=>[l(p,{"hide-bottom-space":"",type:"text",name:"first_name",id:"first_name",modelValue:n(N),"onUpdate:modelValue":a[12]||(a[12]=e=>c(N)?N.value=e:null),label:"First Name:",outlined:"",square:"",dense:"","stack-label":"","lazy-rules":"","bg-color":"white",rules:[e=>!!e||"* Required"]},null,8,["modelValue","rules"])]),_:1}),l(t,{class:"col"},{default:o(()=>[l(p,{"hide-bottom-space":"",type:"text",name:"last_name",id:"last_name",label:"Last Name:",dense:"",outlined:"",square:"","stack-label":"",modelValue:n(B),"onUpdate:modelValue":a[13]||(a[13]=e=>c(B)?B.value=e:null),"lazy-rules":"",rules:[e=>!!e||"* Required"],"bg-color":"white"},null,8,["modelValue","rules"])]),_:1})]),_:1}),l(t,{class:"flex flex-col xs:flex-row q-pa-none"},{default:o(()=>[l(t,{class:"col"},{default:o(()=>[l(p,{"hide-bottom-space":"",type:"email",name:"email_address",id:"email",label:"Email Address:",modelValue:n(E),"onUpdate:modelValue":a[14]||(a[14]=e=>c(E)?E.value=e:null),dense:"",outlined:"",square:"","stack-label":"","lazy-rules":"",rules:["email"],"bg-color":"white",required:"",autocomplete:!1},null,8,["modelValue"])]),_:1}),l(t,{class:"col"},{default:o(()=>[l(n(Ge),{modelValue:n(L),"onUpdate:modelValue":a[15]||(a[15]=e=>c(L)?L.value=e:null),mode:"international",inputOptions:{placeholder:"Phone Number",showDialCode:!0,required:!0,invalidMsg:"Please enter a valid phone number",name:"phone_number"},class:"w-full",required:"",name:"phone_number"},null,8,["modelValue"])]),_:1})]),_:1}),j(l(t,null,{default:o(()=>[l(w,{name:"round_trip",id:"round_trip",class:"text=white",label:"Round Trip",modelValue:n($),"onUpdate:modelValue":a[16]||(a[16]=e=>c($)?$.value=e:null),color:"primary"},null,8,["modelValue"])]),_:1},512),[[ue,!1]]),l(x,{align:"around",id:"submit_button_wrapper"},{default:o(()=>[l(V,{id:"submit_button",type:"submit",label:"Get Prices & Availability",color:"red-8",loading:n(Y)},null,8,["loading"])]),_:1}),j(l(t,{flat:"",class:"w-full h-full"},{default:o(()=>[C("div",{ref_key:"myMap",ref:i,id:"my-map"},null,512)]),_:1},512),[[ue,!1]])]),_:1},8,["onSubmit"])}}}),gl=de({__name:"index",setup(u){return(d,f)=>{const i=vl,A=sl;return ce(),pe(A,{padding:""},{default:o(()=>[l(i)]),_:1})}}});export{gl as default};
